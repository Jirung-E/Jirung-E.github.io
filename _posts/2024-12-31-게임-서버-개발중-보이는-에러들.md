---
title: "게임 서버 개발중 보이는 에러들"
excerpt: "게임 서버 개발중에 나오는 에러들을 정리하고 왜 그런 에러가 나오는지 유추해본다."
last_modified_at: 2024-12-31T22:28:00

categories: 
  - Server

tags: 
  - rust
  - server
  - tokio

toc: true
toc_sticky: true
---


서버 개발시에 볼 수 있는 에러들 중 원인을 파악하기 어려운 에러들을 정리해서 나중에 비슷한 에러가 나왔을때 참고할 수 있도록 한다.  
주로 네트워크 관련, 멀티쓰레드 관련 에러들을 정리한다.  


- - -


## 클라이언트의 서버 접속 실패  
해결 완료  

#### 상황
서버 응답시간을 테스트 하기 위해 서버에 1000개의 더미 클라이언트를 접속시켜 데이터를 주고받는 테스트를 하고 있었다.    
> 테스트 프로그램은 1000개의 더미 클라이언트를 생성하고 각각 서버에 접속해서 데이터를 <u>한번</u> 주고받고 종료한다.     

테스트 초반에는 에러가 발생하지 않았으나, 여러번 테스트를 반복하니 아래와 같은 에러가 발생했다.  
  
#### 에러 내용
```  
각 소켓 주소(프로토콜/네트워크 주소/포트)는 하나만 사용할 수 있습니다. (os error 10048)  
```  
  
#### 환경
OS: Windows 11    
프로토콜: TCP/IP    
서버 구현: Rust + tokio    
클라이언트 구현: Rust + tokio    
  
#### 에러 발생 위치
클라이언트에서 connect 함수 호출시 발생  
  
#### 원인
이전 테스트에 사용한 포트가 아직 닫히지 않아서 클라이언트에서 사용 가능한 포트가 없어서 발생한것으로 추정    
```  
$ netstat -anp tcp | findstr 9000  
```  
로 확인해본 결과, 실제로 포트가 남아있는것을 확인했다.    
  
#### 해결 방법
- 포트를 강제로 닫는다.  
- 좀 기다렸다 다시 시도한다.


- - -


## 모르는 주소로부터 데이터 수신
미해결  

#### 상황
서버에서 모르는 주소로부터 데이터를 수신하는 경우가 있다.  
데이터는 읽을 수 있는 경우도 있고 그렇지 않은 경우도 있다.(HTTP 요청이 오는 경우도 있다.)  
서버는 127.0.0.1 로컬호스트로 열었음에도 이러한 현상이 발생한다.  
  
#### 환경
OS: Windows 11    
프로토콜: TCP/IP    
서버 구현: Rust + tokio    
  
#### 원인
모르겠다.  
무작위 주소로 연결을 시도하는 클라이언트가 있는건지?  
해킹?  
  
#### 해결 방법
모르겠다..  
